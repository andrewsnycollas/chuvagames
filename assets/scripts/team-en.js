const teamMembersEn = [
  {
    name: "Andrews Nycollas",
    role: "Creative Director / Game Designer",
    thumb: "/assets/images/team/andrews.png",
    gif: "/assets/images/team/andrews.gif",
    desc: `Andrews Nycollas has been passionate about game development since his early teens, when he started creating and selling custom arcade fighting games at school at age 12. He has a diverse background in theater, music, film, and visual arts, enriching his creative approach to game design. A professional freelancer in the games industry since 2012, Andrews has worked extensively with the Asian games market since 2019. "I sold everything I had and came to the Philippines to meet a girl, we got married, we have a boy. Now I'm ready to become an indie game developer."`,
    skills: [
      { name: "Narrative", value: 100 },
      { name: "Music & Audio", value: 100 },
      { name: "Pixel Art", value: 40 },
      { name: "Programming", value: 60 },
      { name: "Management", value: 80 },
      { name: "Marketing", value: 80 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/andrews-nycollas-a80271251/", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.youtube.com/@andrewsnycollas3651", icon: "default_youtube.png", hover: "hover_youtube.png", alt: "YouTube" },
      { href: "https://www.twitch.tv/andrewsnycollas", icon: "default_twitch.png", hover: "hover_twitch.png", alt: "Twitch" },
      { href: "https://www.instagram.com/andrewsnycollas_/", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/512014156161875968", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" },
      { href: "https://steamcommunity.com/id/gmandrewsnycollas", icon: "default_steam.png", hover: "hover_steam.png", alt: "Steam" },
      { href: "https://x.com/andrewsnycollas", icon: "default_x.png", hover: "hover_x.png", alt: "X" },
      { href: "https://bsky.app/profile/andrewsnycollas.bsky.social", icon: "default_bsky.png", hover: "hover_bsky.png", alt: "Bluesky" },
      { href: "https://open.spotify.com/artist/5d1B5VZbcDhWjzuXWlL1Ui?si=HU5aU9RbQsGbHnoaKKKMfQ", icon: "default_spotify.png", hover: "hover_spotify.png", alt: "Spotify" }
    ]
  },
  {
    name: "Marcos Genú",
    role: "Art Director",
    thumb: "/assets/images/team/marcos.png",
    gif: "/assets/images/team/marcos.gif",
    desc: `Marcos Genú has worked since 2012 with concept art, 2D animation, and asset creation for games. He has contributed to several projects, including Tap Tap Beer and games developed for major companies such as VALE and the Government of Pará. His work also includes internationally awarded games like Ghostein, recognized at Game Jam+, and a project that secured sixth place at the global BGJam. "Hi, I'm Marcos."`,
    skills: [
      { name: "Pixel Art", value: 100 },
      { name: "Illustration", value: 100 },
      { name: "Animation", value: 60 },
      { name: "3D", value: 20 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/markcg/", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.instagram.com/its_mark_cg/", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/532567066109149186", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  },
  {
    name: "Mohamed Capistrano",
    role: "Producer / Behavior Designer",
    thumb: "/assets/images/team/mohamed.png",
    gif: "/assets/images/team/mohamed.gif",
    desc: `Graduated in Game Development in 2015, but only now, with Andrews' invitation (a longtime friend), am I having the opportunity to work in the field. "I feel excited, as the essence of the game brings back a nostalgic memory. It's authentic."`,
    skills: [
      { name: "Game Developer", value: 50 },
      { name: "Behavior Designer", value: 80 },
      { name: "Level Designer", value: 80 },
      { name: "Tester", value: 80 },
      { name: "Programmer", value: 40 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/mohamed-capistrano-0a475279/", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.twitch.tv/mokaap", icon: "default_twitch.png", hover: "hover_twitch.png", alt: "Twitch" },
      { href: "https://www.instagram.com/brightersheep", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/335489284197056522", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  },
  {
    name: "Rick Galasio",
    role: "Linux Specialist / Voice Actor",
    thumb: "/assets/images/team/rick.png",
    gif: "/assets/images/team/rick.gif",
    desc: `Rick Galasio, an autistic man with over half a century of life. After years dedicated to family and work, he can finally honor the autistic child who still lives inside him and fulfill his dream of becoming an indie game developer. "I'm just an old autistic guy."`,
    skills: [
      { name: "Linux", value: 100 },
      { name: "Acting", value: 200 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/ricardo-leite-a5467a38/", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.youtube.com/@ricleitetube", icon: "default_youtube.png", hover: "hover_youtube.png", alt: "YouTube" },
      { href: "https://www.instagram.com/rickgalasio", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/612803183764307968", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  },
  {
    name: "André Borba",
    role: "Producer / Community Manager / Sound Designer",
    thumb: "/assets/images/team/tuta.png",
    gif: "/assets/images/team/tuta.gif",
    desc: `André, known as Tutankhamal, is passionate about technology and music. Neurodivergent (autistic and ADHD), he has experience in Front-end development, community management, and customer support. A self-taught learner, he turns his passion for video games and computers into technical knowledge.`,
    skills: [
      { name: "Community Manager", value: 100 },
      { name: "Front-End Development", value: 80 },
      { name: "Sound Designer", value: 50 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/tutankhamal/", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.youtube.com/@tutankhamal", icon: "default_youtube.png", hover: "hover_youtube.png", alt: "YouTube" },
      { href: "https://www.twitch.tv/tutankhamal", icon: "default_twitch.png", hover: "hover_twitch.png", alt: "Twitch" },
      { href: "https://www.instagram.com/tutankhamal", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://www.tiktok.com/@tutankhamal", icon: "default_tiktok.png", hover: "hover_tiktok.png", alt: "TikTok" },
      { href: "https://discordapp.com/users/820522746622246963", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" },
      { href: "https://steamcommunity.com/id/Tutankhamal/", icon: "default_steam.png", hover: "hover_steam.png", alt: "Steam" },
      { href: "https://x.com/Tutankhamal", icon: "default_x.png", hover: "hover_x.png", alt: "X" },
      { href: "https://bsky.app/profile/tutankhamal.bsky.social", icon: "default_bsky.png", hover: "hover_bsky.png", alt: "Bluesky" },
      { href: "https://soundcloud.com/tutankhamal", icon: "default_soundcloud.png", hover: "hover_soundcloud.png", alt: "Soundcloud" }
    ]
  },
  {
    name: "Camila Sales",
    role: "2D Artist",
    thumb: "/assets/images/team/camila.png",
    gif: "/assets/images/team/camila.gif",
    desc: `Graduated in Game Development since 2017 and currently pursuing a postgraduate degree in Digital Animation. I discovered the world of drawing in childhood, like many artists, starting with Dragon Ball sketches. I grew up and dedicated myself to various forms of drawing and painting, from pencil and paper to canvas painting. In 2020, I bought my first graphics tablet and started exploring Digital Painting, soon after starting to study 2D Digital Animation. Art, in general, has always been my escape, and returning to the game industry will be challenging but exciting.`,
    skills: [
      { name: "2D Illustration", value: 100 },
      { name: "Character Concept", value: 100 },
      { name: "2D Animation", value: 60 },
      { name: "Storyboard", value: 60 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/camila-sales-4b135a231", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://discordapp.com/users/1064628941970755735", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  },
  {
    name: "Richard de Leon",
    role: "Marketing Manager",
    thumb: "/assets/images/team/richard.png",
    gif: "/assets/images/team/richard.gif",
    desc: `He has worked in marketing for seven years, starting his career at major advertising agencies in São Paulo. A few years ago, he moved to Asia, where he has been active in the Asian games market, focusing on digital advertising. Passionate about reading and games, he draws inspiration from these interests to fuel his creativity and professional endeavors.`,
    skills: [
      { name: "Social Media Manager", value: 100 },
      { name: "Digital Marketing", value: 100 },
      { name: "Prompt Engineer", value: 80 },
      { name: "Video Editor", value: 70 },
      { name: "SEO/SEM", value: 60 }
    ],
    social: [
      { href: "https://www.linkedin.com/in/richard-de-leon-534123144", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.instagram.com/_richarddeleon/", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/1312938936120643670", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  },
  {
    name: "Sara Amorim",
    role: "Public Relations",
    thumb: "/assets/images/team/sara.png",
    gif: "/assets/images/team/sara.gif",
    desc: `Sara Amorim is a skilled communicator, passionate about building bridges between developers and players. With a strong ability to listen and articulate, she will be the voice of CHUVA, connecting the development team with its audience.`,
    skills: [
      { name: "Communication", value: 100 }
    ],
    social: [
      { href: "https://www.linkedin.com", icon: "default_linkedin.png", hover: "hover_linkedin.png", alt: "LinkedIn" },
      { href: "https://www.instagram.com/saramorimmm/", icon: "default_insta.png", hover: "hover_insta.png", alt: "Instagram" },
      { href: "https://discordapp.com/users/1324819249184637086", icon: "default_discord.png", hover: "hover_discord.png", alt: "Discord" }
    ]
  }
];

// Shuffle array (Fisher-Yates)
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// Render team cards
(function() {
  const grid = document.getElementById('teamCardsGridEn');
  if (!grid) return;
  window._shuffledTeamEn = [...teamMembersEn];
  shuffleArray(window._shuffledTeamEn);
  grid.innerHTML = window._shuffledTeamEn.map((m, idx) => `
    <div class="team-card" data-idx="${idx}">
      <img src="${m.thumb}" data-original-src="${m.thumb}" data-hover-src="${m.gif}" class="team-thumb" alt="${m.name}">
      <div class="team-card-name">${m.name}</div>
      <div class="team-card-role">${m.role}</div>
    </div>
  `).join('');
})();

// Avatar hover on cards
document.addEventListener('mouseover', function(e) {
  if (e.target.classList.contains('team-thumb')) {
    e.target.src = e.target.getAttribute('data-hover-src');
    e.target.classList.add('hovered');
  }
});
document.addEventListener('mouseout', function(e) {
  if (e.target.classList.contains('team-thumb')) {
    e.target.src = e.target.getAttribute('data-original-src');
    e.target.classList.remove('hovered');
  }
});

// Interactive modal
(function() {
  const grid = document.getElementById('teamCardsGridEn');
  const modalBg = document.getElementById('teamModalBgEn');
  const modal = document.getElementById('teamModalEn');
  const modalImg = document.getElementById('teamModalImgEn');
  const modalTitle = document.getElementById('teamModalTitleEn');
  const modalRole = document.getElementById('teamModalRoleEn');
  const modalDesc = document.getElementById('teamModalDescEn');
  const modalSkills = document.getElementById('teamModalSkillsEn');
  const modalSocial = document.getElementById('teamModalSocialEn');
  const modalClose = document.getElementById('teamModalCloseEn');

  if (!grid || !modalBg || !modal || !modalImg || !modalTitle || !modalRole || !modalDesc || !modalSkills || !modalSocial || !modalClose) return;

  grid.addEventListener('click', function(e) {
    const card = e.target.closest('.team-card');
    if (!card) return;
    const idx = card.getAttribute('data-idx');
    const m = window._shuffledTeamEn[idx];

    // Fill modal
    modalImg.src = m.thumb;
    modalImg.setAttribute('data-original-src', m.thumb);
    modalImg.setAttribute('data-hover-src', m.gif);
    modalImg.alt = m.name;
    modalTitle.textContent = m.name;
    modalRole.textContent = m.role;
    modalDesc.textContent = m.desc;
    modalSkills.innerHTML = m.skills.map(skill => `
      <div class="progress-bar-container">
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${skill.value}%"></div>
          <span class="progress-text">${skill.name}</span>
        </div>
      </div>
    `).join('');
    modalSocial.innerHTML = m.social.map(s => `
      <a href="${s.href}" target="_blank">
        <img 
          src="/assets/images/icons/default/${s.icon}" 
          data-original-src="/assets/images/icons/default/${s.icon}" 
          data-hover-src="/assets/images/icons/hover/${s.hover}" 
          alt="${s.alt}"
          class="social-icon-hover"
        >
      </a>
    `).join('');
    modalBg.classList.add('active');
    document.body.style.overflow = 'hidden';
  });

  modalImg.addEventListener('mouseover', function() {
    modalImg.src = modalImg.getAttribute('data-hover-src');
    modalImg.classList.add('hovered');
  });
  modalImg.addEventListener('mouseout', function() {
    modalImg.src = modalImg.getAttribute('data-original-src');
    modalImg.classList.remove('hovered');
  });

  function closeModal() {
    modalBg.classList.remove('active');
    document.body.style.overflow = '';
  }
  modalClose.addEventListener('click', closeModal);
  modalBg.addEventListener('click', (e) => {
    if (e.target === modalBg) closeModal();
  });
  window.addEventListener('keydown', (e) => {
    if (e.key === "Escape") closeModal();
  });
})();

// Social icon hover
document.addEventListener('mouseover', function(e) {
  if (e.target.classList.contains('social-icon-hover')) {
    const hoverSrc = e.target.getAttribute('data-hover-src');
    if (hoverSrc) e.target.src = hoverSrc;
    e.target.style.transform = 'scale(1.15)';
  }
});
document.addEventListener('mouseout', function(e) {
  if (e.target.classList.contains('social-icon-hover')) {
    const originalSrc = e.target.getAttribute('data-original-src');
    if (originalSrc) e.target.src = originalSrc;
    e.target.style.transform = '';
  }
});

// Navbar: esconde ao rolar para baixo, mostra ao rolar para cima
(function() {
  const header = document.querySelector('.header');
  if (!header) return;
  let prevScrollpos = window.pageYOffset;
  window.addEventListener('scroll', function() {
    const currentScrollPos = window.pageYOffset;
    if (prevScrollpos > currentScrollPos) {
      header.classList.remove('hide');
    } else {
      header.classList.add('hide');
    }
    prevScrollpos = currentScrollPos;
  });
})();

// Hover dos ícones sociais (troca imagem default/hover)
(function() {
  const icons = document.querySelectorAll('.social-icon-hover');
  icons.forEach(icon => {
    const originalSrc = icon.getAttribute('data-original-src');
    const hoverSrc = icon.getAttribute('data-hover-src');
    if (!originalSrc || !hoverSrc) return;

    icon.addEventListener('mouseover', () => { icon.src = hoverSrc; });
    icon.addEventListener('mouseout', () => { icon.src = originalSrc; });
    icon.addEventListener('touchstart', () => { icon.src = hoverSrc; });
    icon.addEventListener('touchend', () => { icon.src = originalSrc; });
  });
})();

// Copiar e-mail para área de transferência
(function() {
  const copyBtn = document.getElementById('copy-email');
  if (!copyBtn) return;
  copyBtn.addEventListener('click', function(e) {
    e.preventDefault();
    const email = 'andrewsnycollas@chuvagames.co';
    navigator.clipboard.writeText(email).then(function() {
      alert('Email copiado para a área de transferência: ' + email);
    }, function(err) {
      console.error('Não foi possível copiar o email: ', err);
    });
  });
})();